@model zapread.com.Models.RecentUnreadMessagesViewModel

@foreach (var m in Model.Messages)
{
    <li id="m1_@m.Id">
        <div class="dropdown-messages-box">
            @if (m.From != null)
            {
                <a href="@Url.Action(actionName: "Index", controllerName: "User", routeValues: new { username = m.From.Name })" class="pull-left">
                    <img alt="image" class="img-circle" src="@Url.Action("UserImage", "Home", new { size = 30, UserId = m.From.AppId })">
                </a>
            }
            else
            {
                <a href="#" class="pull-left">
                    <img alt="image" class="img-circle" src="@Url.Action("UserImage", "Home", new { size = 30, UserId = "" })">
                </a>
            }
            <div class="media-body">
                <span class="pull-right">
                    <a data-keepOpenOnClick href="javascript:void(0);" onclick="dismiss(0,@m.Id)" class="btn btn-sm btn-outline" data-toggle="tooltip" data-placement="top" title="Dismiss"><icon class="fa fa-minus-circle"></icon></a>
                </span>
                @if (m.From != null) { <text>From: <a href="@Url.Action("Index", controllerName: "User", routeValues: new { username = m.From.Name })" class="btn btn-link">@m.From.Name</a></text>}
                @if (m.IsPrivateMessage)
                {
                    <p>
                        <a href="@Url.Action(actionName: "Chat", controllerName: "Messages", routeValues: new { username = m.From.Name })" style="padding-left: 0px;">Go to chat</a>
                    </p>
                }
                @Html.Raw(m.Content)
                @*<small class="text-muted">@m.TimeStamp.Value.ToString("o")</small>*@
            </div>
        </div>
    </li>    
    <li id="m2_@m.Id" class="divider"><hr /></li>
}
