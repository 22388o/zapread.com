@model zapread.com.Models.GroupAdminBarViewModel

<div class="wrapper wrapper-content ">
    <div class="row ">
        <div class="col-lg-12">
            <div class="ibox float-e-margins collapsed" style="margin-bottom: 0px;">
                <div class="ibox-title bg-warning">
                    <h5>
                        Group Administration : You have administration privilages for this group
                    </h5>
                    <div class="ibox-tools">
                        <a class="collapse-link">
                            <i class="fa fa-chevron-up"></i>
                        </a>
                        <a class="close-link">
                            <i class="fa fa-times"></i>
                        </a>
                    </div>
                </div>
                <div class="ibox-content">
                    <h2>
                        Group Actions
                    </h2>
                    <div class="row">
                        <div class="col-lg-12">
                            <button class="btn btn-sm btn-primary btn-outline" id="GAdminEditTags" data-toggle="modal" data-target="#GAdminEditTagModal">Edit Tags</button>
                            <button class="btn btn-sm btn-primary btn-outline" id="GAdminEditIcon" data-toggle="modal" data-target="#GAdminEditIconModal">Edit Icon</button>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-lg-3">
                            <div class="ibox float-e-margins">
                                <div class="ibox-title bg-danger">
                                    <h5>Group User Roles</h5>
                                    <div class="ibox-tools">
                                        <a class="collapse-link">
                                            <i class="fa fa-chevron-up"></i>
                                        </a>
                                    </div>
                                </div>
                                <div class="ibox-content">
                                    @{Html.RenderAction("AdminAddUserToGroupRoleForm", "Group", new { groupId = ViewBag.groupId });}
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-3">
                            <div class="ibox float-e-margins">
                                <div class="ibox-title bg-danger">
                                    <h5>Group Settings</h5>
                                    <div class="ibox-tools">
                                        <a class="collapse-link">
                                            <i class="fa fa-chevron-up"></i>
                                        </a>
                                    </div>
                                </div>
                                <div class="ibox-content">
                                    <button class="btn btn-sm btn-outline btn-primary" onclick="changeName(@Model.GroupId);">Change Group Name</button>
                                    @*<h1 class="no-margins">Not yet implemented.</h1>*@
                                    @*<div class="stat-percent font-bold text-info">20% <i class="fa fa-level-up"></i></div>
                                        <small>BTC User Deposits</small>*@
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-3">
                            <div class="ibox float-e-margins">
                                <div class="ibox-title bg-danger">
                                    <h5>Group Themes</h5>
                                    <div class="ibox-tools">
                                        <a class="collapse-link">
                                            <i class="fa fa-chevron-up"></i>
                                        </a>
                                    </div>
                                </div>
                                <div class="ibox-content">
                                    <h1 class="no-margins">Not yet implemented.</h1>
                                    @*<div class="stat-percent font-bold text-navy">44% <i class="fa fa-level-up"></i></div>
                                        <small>BTC User Withdraws</small>*@
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-3">
                            <div class="ibox float-e-margins">
                                <div class="ibox-title bg-danger">
                                    <h5>Group Achievements</h5>
                                    <div class="ibox-tools">
                                        <a class="collapse-link">
                                            <i class="fa fa-chevron-up"></i>
                                        </a>
                                    </div>
                                </div>
                                <div class="ibox-content">
                                    <h1 class="no-margins">Not yet implemented.</h1>
                                    @*<div class="stat-percent font-bold text-danger">38% <i class="fa fa-level-down"></i></div>
                                        <small>Up + Down</small>*@
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="GAdminEditTagModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Edit Tags</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                @{ Html.RenderAction("GetGroupTags", "Group", new { groupId = ViewBag.groupId });}
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" id="GroupTagSaveChanges">Save changes</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="GAdminEditTagModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Edit Tags</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                @{ Html.RenderAction("GetGroupTags", "Group", new { groupId = ViewBag.groupId });}
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" id="GroupTagSaveChanges">Save changes</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="GAdminEditIconModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Edit Icon</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                @{ Html.RenderAction("GetGroupIcons", "Group", new { groupId = ViewBag.groupId });}
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" id="GroupIconSaveChanges">Save changes</button>
            </div>
        </div>
    </div>
</div>

@Html.Script(
@<script type="text/javascript">
     var changeName = function (groupId) {
         swal({
             text: 'Enter new group name',
             content: "input",
             button: {
                 text: "Ok",
                 closeModal: false,
             },
         })
         .then(name => {
            if (!name) throw null;

            $.post("@Url.Action("ChangeName",
                    "Group")",
                    { "groupId": groupId, "newName": name },
                    function (data) {
                        if (data.success) {
                            swal("Your group name has been updated!", {
                                icon: "success",
                            });
                        }
                        else {
                            swal("Error", "Error updating group name: " + data.message, "error");
                        }
                    });
         })
        .catch(err => {
            if (err) {
                swal("Error", "Error updating group name.", "error");
            } else {
                swal.stopLoading();
                swal.close();
            }
        });
     };
</script>
        )